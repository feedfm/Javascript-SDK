/* A Feed.fm joint: github.com/fuzz-radio/Javascript-SDK */"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,a=a.sigBytes;if(this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(255&c[e>>>2]>>>24-8*(e%4))<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(0|4294967296*a.random());return f.create(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;a>d;d++){var e=255&b[d>>>2]>>>24-8*(d%4);c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return f.create(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;a>d;d++)c.push(String.fromCharCode(255&b[d>>>2]>>>24-8*(d%4)));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return f.create(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=f.create(),this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=e/(4*g),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0),b=h*g,e=a.min(4*b,e);if(b){for(var i=0;b>i;i+=g)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return f.create(i,e)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=k.extend({init:function(){this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize(),this._hash},clone:function(){var a=k.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:16,_createHelper:function(a){return function(b,c){return a.create(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return l.HMAC.create(a,c).finalize(b)}}});var l=c.algo={};return c}(Math);!function(a){var b=CryptoJS,c=b.lib,d=c.WordArray,c=c.Hasher,e=b.algo,f=[],g=[];!function(){function b(b){for(var c=a.sqrt(b),d=2;c>=d;d++)if(!(b%d))return!1;return!0}function c(a){return 0|4294967296*(a-(0|a))}for(var d=2,e=0;64>e;)b(d)&&(8>e&&(f[e]=c(a.pow(d,.5))),g[e]=c(a.pow(d,1/3)),e++),d++}();var h=[],e=e.SHA256=c.extend({_doReset:function(){this._hash=d.create(f.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],i=c[3],j=c[4],k=c[5],l=c[6],m=c[7],n=0;64>n;n++){if(16>n)h[n]=0|a[b+n];else{var o=h[n-15],p=h[n-2];h[n]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+h[n-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+h[n-16]}o=m+((j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25))+(j&k^~j&l)+g[n]+h[n],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),m=l,l=k,k=j,j=0|i+o,i=f,f=e,e=d,d=0|o+p}c[0]=0|c[0]+d,c[1]=0|c[1]+e,c[2]=0|c[2]+f,c[3]=0|c[3]+i,c[4]=0|c[4]+j,c[5]=0|c[5]+k,c[6]=0|c[6]+l,c[7]=0|c[7]+m},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process()}});b.SHA256=c._createHelper(e),b.HmacSHA256=c._createHmacHelper(e)}(Math),function(){var a=CryptoJS,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,c){a=this._hasher=a.create(),"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c));for(var f=this._oKey=c.clone(),g=this._iKey=c.clone(),h=f.words,i=g.words,j=0;d>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=e,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher,a=b.finalize(a);return b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=a.enc;d.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;c>f;f+=3)for(var g=255&b[f>>>2]>>>24-8*(f%4),h=255&b[f+1>>>2]>>>24-8*((f+1)%4),i=255&b[f+2>>>2]>>>24-8*((f+2)%4),j=g<<16|h<<8|i,k=0;4>k&&c>f+.75*k;k++)e.push(d.charAt(63&j>>>6*(3-k)));var l=d.charAt(64);if(l)for(;e.length%4;)e.push(l);return e.join("")},parse:function(a){a=a.replace(/\s/g,"");var b=a.length,d=this._map,e=d.charAt(64);if(e){var f=a.indexOf(e);-1!=f&&(b=f)}for(var g=[],h=0,i=0;b>i;i++)if(i%4){var j=d.indexOf(a.charAt(i-1))<<2*(i%4),k=d.indexOf(a.charAt(i))>>>6-2*(i%4);g[h>>>2]|=(j|k)<<24-8*(h%4),h++}return c.create(g,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();var OAuth;null==OAuth&&(OAuth={}),OAuth.setProperties=function(a,b){if(null!=a&&null!=b)for(var c in b)a[c]=b[c];return a},OAuth.setProperties(OAuth,{percentEncode:function(a){if(null==a)return"";if(a instanceof Array){for(var b="",c=0;c<a.length;++a)""!=b&&(b+="&"),b+=OAuth.percentEncode(a[c]);return b}return a=encodeURIComponent(a),a=a.replace(/\!/g,"%21"),a=a.replace(/\*/g,"%2A"),a=a.replace(/\'/g,"%27"),a=a.replace(/\(/g,"%28"),a=a.replace(/\)/g,"%29")},decodePercent:function(a){return null!=a&&(a=a.replace(/\+/g," ")),decodeURIComponent(a)},getParameterList:function(a){if(null==a)return[];if("object"!=typeof a)return OAuth.decodeForm(a+"");if(a instanceof Array)return a;var b=[];for(var c in a)b.push([c,a[c]]);return b},getParameterMap:function(a){if(null==a)return{};if("object"!=typeof a)return OAuth.getParameterMap(OAuth.decodeForm(a+""));if(a instanceof Array){for(var b={},c=0;c<a.length;++c){var d=a[c][0];void 0===b[d]&&(b[d]=a[c][1])}return b}return a},getParameter:function(a,b){if(!(a instanceof Array))return OAuth.getParameterMap(a)[b];for(var c=0;c<a.length;++c)if(a[c][0]==b)return a[c][1];return null},formEncode:function(a){for(var b="",c=OAuth.getParameterList(a),d=0;d<c.length;++d){var e=c[d][1];null==e&&(e=""),""!=b&&(b+="&"),b+=OAuth.percentEncode(c[d][0])+"="+OAuth.percentEncode(e)}return b},decodeForm:function(a){for(var b=[],c=a.split("&"),d=0;d<c.length;++d){var e=c[d];if(""!=e){var f,g,h=e.indexOf("=");0>h?(f=OAuth.decodePercent(e),g=null):(f=OAuth.decodePercent(e.substring(0,h)),g=OAuth.decodePercent(e.substring(h+1))),b.push([f,g])}}return b},setParameter:function(a,b,c){var d=a.parameters;if(d instanceof Array){for(var e=0;e<d.length;++e)d[e][0]==b&&(void 0===c?d.splice(e,1):(d[e][1]=c,c=void 0));void 0!==c&&d.push([b,c])}else d=OAuth.getParameterMap(d),d[b]=c,a.parameters=d},setParameters:function(a,b){for(var c=OAuth.getParameterList(b),d=0;d<c.length;++d)OAuth.setParameter(a,c[d][0],c[d][1])},completeRequest:function(a,b){null==a.method&&(a.method="GET");var c=OAuth.getParameterMap(a.parameters);null==c.oauth_consumer_key&&OAuth.setParameter(a,"oauth_consumer_key",b.consumerKey||""),null==c.oauth_token&&null!=b.token&&OAuth.setParameter(a,"oauth_token",b.token),null==c.oauth_version&&OAuth.setParameter(a,"oauth_version","1.0"),null==c.oauth_timestamp&&OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp()),null==c.oauth_nonce&&OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6)),OAuth.SignatureMethod.sign(a,b)},setTimestampAndNonce:function(a){OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp()),OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6))},addToURL:function(a,b){if(newURL=a,null!=b){var c=OAuth.formEncode(b);if(c.length>0){var d=a.indexOf("?");newURL+=0>d?"?":"&",newURL+=c}}return newURL},getAuthorizationHeader:function(a,b){for(var c='OAuth realm="'+OAuth.percentEncode(a)+'"',d=OAuth.getParameterList(b),e=0;e<d.length;++e){var f=d[e],g=f[0];0==g.indexOf("oauth_")&&(c+=","+OAuth.percentEncode(g)+'="'+OAuth.percentEncode(f[1])+'"')}return c},correctTimestampFromSrc:function(a){a=a||"oauth_timestamp";var b=document.getElementsByTagName("script");if(null!=b&&b.length){var c=b[b.length-1].src;if(c){var d=c.indexOf("?");if(!(0>d)){parameters=OAuth.getParameterMap(OAuth.decodeForm(c.substring(d+1)));var e=parameters[a];null!=e&&OAuth.correctTimestamp(e)}}}},correctTimestamp:function(a){OAuth.timeCorrectionMsec=1e3*a-(new Date).getTime()},timeCorrectionMsec:0,timestamp:function(){var a=(new Date).getTime()+OAuth.timeCorrectionMsec;return Math.floor(a/1e3)},nonce:function(a){for(var b=OAuth.nonce.CHARS,c="",d=0;a>d;++d){var e=Math.floor(Math.random()*b.length);c+=b.substring(e,e+1)}return c}}),OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",OAuth.declareClass=function(a,b,c){var d=a[b];if(a[b]=c,null!=c&&null!=d)for(var e in d)"prototype"!=e&&(c[e]=d[e]);return c},OAuth.declareClass(OAuth,"SignatureMethod",function(){}),OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function(a){var b=OAuth.SignatureMethod.getBaseString(a),c=this.getSignature(b);return OAuth.setParameter(a,"oauth_signature",c),c},initialize:function(a,b){var c;c=null!=b.accessorSecret&&a.length>9&&"-Accessor"==a.substring(a.length-9)?b.accessorSecret:b.consumerSecret,this.key=OAuth.percentEncode(c)+"&"+OAuth.percentEncode(b.tokenSecret)}}),OAuth.setProperties(OAuth.SignatureMethod,{sign:function(a,b){var c=OAuth.getParameterMap(a.parameters).oauth_signature_method;(null==c||""==c)&&(c="HMAC-SHA1",OAuth.setParameter(a,"oauth_signature_method",c)),OAuth.SignatureMethod.newMethod(c,b).sign(a)},newMethod:function(a,b){var c=OAuth.SignatureMethod.REGISTERED[a];if(null!=c){var d=new c;return d.initialize(a,b),d}var e=new Error("signature_method_rejected"),f="";for(var g in OAuth.SignatureMethod.REGISTERED)""!=f&&(f+="&"),f+=OAuth.percentEncode(g);throw e.oauth_acceptable_signature_methods=f,e},REGISTERED:{},registerMethodClass:function(a,b){for(var c=0;c<a.length;++c)OAuth.SignatureMethod.REGISTERED[a[c]]=b},makeSubclass:function(a){var b=OAuth.SignatureMethod,c=function(){b.call(this)};return c.prototype=new b,c.prototype.getSignature=a,c.prototype.constructor=c,c},getBaseString:function(a){var b,c=a.action,d=c.indexOf("?");if(0>d)b=a.parameters;else{b=OAuth.decodeForm(c.substring(d+1));for(var e=OAuth.getParameterList(a.parameters),f=0;f<e.length;++f)b.push(e[f])}return OAuth.percentEncode(a.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(c))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(b))},normalizeUrl:function(a){var b=OAuth.SignatureMethod.parseUri(a),c=b.protocol.toLowerCase(),d=b.authority.toLowerCase(),e="http"==c&&80==b.port||"https"==c&&443==b.port;if(e){var f=d.lastIndexOf(":");f>=0&&(d=d.substring(0,f))}var g=b.path;return g||(g="/"),c+"://"+d+g},parseUri:function(a){for(var b={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=b.parser.strict.exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d},normalizeParameters:function(a){if(null==a)return"";for(var b=OAuth.getParameterList(a),c=[],d=0;d<b.length;++d){var e=b[d];"oauth_signature"!=e[0]&&c.push([OAuth.percentEncode(e[0])+" "+OAuth.percentEncode(e[1]),e])}c.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});for(var f=[],g=0;g<c.length;++g)f.push(c[g][1]);return OAuth.formEncode(f)}}),OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function(){return this.key})),OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function(a){b64pad="=";var b=b64_hmac_sha1(this.key,a);return b}));try{OAuth.correctTimestampFromSrc()}catch(e){}/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(b){}}var e=/\+/g,f=a.cookie=function(e,g,h){if(void 0!==g){if(h=a.extend({},f.defaults,h),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g=f.json?JSON.stringify(g):String(g),document.cookie=[f.raw?e:encodeURIComponent(e),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var k=f.raw?b:c,l=document.cookie.split("; "),m=e?void 0:{},n=0,o=l.length;o>n;n++){var p=l[n].split("="),q=k(p.shift()),r=k(p.join("="));if(e&&e===q){m=d(r);break}e||(m[q]=d(r))}return m};f.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)?(a.cookie(b,"",a.extend(c,{expires:-1})),!0):!1}}),function(){function a(b,c,d){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;if(b._chain&&(b=b._wrapped),c._chain&&(c=c._wrapped),b.isEqual&&x.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&x.isFunction(c.isEqual))return c.isEqual(b);var e=j.call(b);if(e!=j.call(c))return!1;switch(e){case"[object String]":return b==String(c);case"[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case"[object Date]":case"[object Boolean]":return+b==+c;case"[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==b)return!0;d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=b.length,h=g==c.length)for(;g--&&(h=g in b==g in c&&a(b[g],c[g],d)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var i in b)if(x.has(b,i)&&(g++,!(h=x.has(c,i)&&a(b[i],c[i],d))))break;if(h){for(i in c)if(x.has(c,i)&&!g--)break;h=!g}}return d.pop(),h}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,g=Function.prototype,h=e.slice,i=e.unshift,j=f.toString,k=f.hasOwnProperty,l=e.forEach,m=e.map,n=e.reduce,o=e.reduceRight,p=e.filter,q=e.every,r=e.some,s=e.indexOf,t=e.lastIndexOf,u=Array.isArray,v=Object.keys,w=g.bind,x=function(a){return new I(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):b._=x,x.VERSION="1.3.3";var y=x.each=x.forEach=function(a,b,c){if(null!=a)if(l&&a.forEach===l)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(e in a&&b.call(c,a[e],e,a)===d)return}else for(var g in a)if(x.has(a,g)&&b.call(c,a[g],g,a)===d)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=x.toArray(a).reverse();return d&&!e&&(b=x.bind(b,d)),e?x.reduce(f,b,c,d):x.reduce(f,b)},x.find=x.detect=function(a,b,c){var d;return z(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){var d=[];return null==a?d:(y(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},x.every=x.all=function(a,b,c){var e=!0;return null==a?e:q&&a.every===q?a.every(b,c):(y(a,function(a,f,g){return(e=e&&b.call(c,a,f,g))?void 0:d}),!!e)};var z=x.some=x.any=function(a,b,c){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,c):(y(a,function(a,f,g){return e||(e=b.call(c,a,f,g))?d:void 0}),!!e)};x.include=x.contains=function(a,b){var c=!1;return null==a?c:s&&a.indexOf===s?-1!=a.indexOf(b):c=z(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2);return x.map(a,function(a){return(x.isFunction(b)?b||a:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=[];return y(a,function(a,d){b=Math.floor(Math.random()*(d+1)),c[d]=c[b],c[b]=a}),c},x.sortBy=function(a,b,c){var d=x.isFunction(b)?b:function(a){return a[b]};return x.pluck(x.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return void 0===c?1:void 0===d?-1:d>c?-1:c>d?1:0}),"value")},x.groupBy=function(a,b){var c={},d=x.isFunction(b)?b:function(a){return a[b]};return y(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},x.sortedIndex=function(a,b,c){c||(c=x.identity);for(var d=0,e=a.length;e>d;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},x.toArray=function(a){return a?x.isArray(a)?h.call(a):x.isArguments(a)?h.call(a):a.toArray&&x.isFunction(a.toArray)?a.toArray():x.values(a):[]},x.size=function(a){return x.isArray(a)?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,function(a){return!!a})},x.flatten=function(a,b){return x.reduce(a,function(a,c){return x.isArray(c)?a.concat(b?c:x.flatten(c)):(a[a.length]=c,a)},[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c){var d=c?x.map(a,c):a,e=[];return a.length<3&&(b=!0),x.reduce(d,function(c,d,f){return(b?x.last(c)===d&&c.length:x.include(c,d))||(c.push(d),e.push(a[f])),c},[]),e},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=x.intersect=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=x.flatten(h.call(arguments,1),!0);return x.filter(a,function(a){return!x.include(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d,e;if(c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;if(s&&a.indexOf===s)return a.indexOf(b);for(d=0,e=a.length;e>d;d++)if(d in a&&a[d]===b)return d;return-1},x.lastIndexOf=function(a,b){if(null==a)return-1;if(t&&a.lastIndexOf===t)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var A=function(){};x.bind=function(a,b){var c,d;if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return d=h.call(arguments,2),c=function(){if(!(this instanceof c))return a.apply(b,d.concat(h.call(arguments)));A.prototype=a.prototype;var e=new A,f=a.apply(e,d.concat(h.call(arguments)));return Object(f)===f?f:e}},x.bindAll=function(a){var b=h.call(arguments,1);return 0==b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g,h,i=x.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}},x.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},x.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){return x.map(a,x.identity)},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={};return y(x.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])}),b},x.defaults=function(a){return y(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a},x.isEqual=function(b,c){return a(b,c,[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!=a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},x.isArguments=function(a){return"[object Arguments]"==j.call(a)},x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),x.isFunction=function(a){return"[object Function]"==j.call(a)},x.isString=function(a){return"[object String]"==j.call(a)},x.isNumber=function(a){return"[object Number]"==j.call(a)},x.isFinite=function(a){return x.isNumber(a)&&isFinite(a)},x.isNaN=function(a){return a!==a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isDate=function(a){return"[object Date]"==j.call(a)},x.isRegExp=function(a){return"[object RegExp]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return b._=c,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=0;a>d;d++)b.call(c,d)},x.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){K(b,x[b]=a[b])})};var B=0;x.uniqueId=function(a){var b=B++;return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var E in D)D[D[E]]=E;var F=/\\|'|\r|\n|\t|\u2028|\u2029/g,G=/\\(\\|'|r|n|t|u2028|u2029)/g,H=function(a){return a.replace(G,function(a,b){return D[b]})};x.template=function(a,b,c){c=x.defaults(c||{},x.templateSettings);var d="__p+='"+a.replace(F,function(a){return"\\"+D[a]}).replace(c.escape||C,function(a,b){return"'+\n_.escape("+H(b)+")+\n'"}).replace(c.interpolate||C,function(a,b){return"'+\n("+H(b)+")+\n'"}).replace(c.evaluate||C,function(a,b){return"';\n"+H(b)+"\n;__p+='"})+"';\n";c.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+d+"return __p;\n";var e=new Function(c.variable||"obj","_",d);if(b)return e(b,x);var f=function(a){return e.call(this,a,x)};return f.source="function("+(c.variable||"obj")+"){\n"+d+"}",f},x.chain=function(a){return x(a).chain()};var I=function(a){this._wrapped=a};x.prototype=I.prototype;var J=function(a,b){return b?x(a).chain():a},K=function(a,b){I.prototype[a]=function(){var a=h.call(arguments);return i.call(a,this._wrapped),J(b.apply(x,a),this._chain)}};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=e[a];I.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return"shift"!=a&&"splice"!=a||0!==d||delete c[0],J(c,this._chain)}}),y(["concat","join","slice"],function(a){var b=e[a];I.prototype[a]=function(){return J(b.apply(this._wrapped,arguments),this._chain)}}),I.prototype.chain=function(){return this._chain=!0,this},I.prototype.value=function(){return this._wrapped}}.call(this),/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20111220
 */
function(a){function b(b,c){function d(a){return function(b){var c=this._t;return c&&c._a?a.call(this,b):(c&&c.sID?fb._wD(jb+"ignoring "+b.type+": "+c.sID):fb._wD(jb+"ignoring "+b.type),null)}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.html5PollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=c||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20111220",this.version=null,this.movieURL=null,this.url=b||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&"undefined"!=typeof(new Audio).canPlayType}catch(a){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb=this,gb=null,hb="soundManager",ib=hb+"::",jb="HTML5::",kb=navigator.userAgent,lb=a,mb=lb.location.href.toString(),nb=document,ob=[],pb=!0,qb=!1,rb=!1,sb=!1,tb=!1,ub=!1,vb=0,wb=["log","info","warn","error"],xb=8,yb=null,zb=null,Ab=!1,Bb=!1,Cb=0,Db=null,Eb=null,Fb=Array.prototype.slice,Gb=!1,Hb=kb.match(/(ipad|iphone|ipod)/i),Ib=kb.match(/firefox/i),Jb=kb.match(/droid/i),Kb=kb.match(/msie/i),Lb=kb.match(/webkit/i),Mb=kb.match(/safari/i)&&!kb.match(/chrome/i),Nb=kb.match(/opera/i),Ob=kb.match(/(mobile|pre\/|xoom)/i)||Hb,Pb=!mb.match(/usehtml5audio/i)&&!mb.match(/sm2\-ignorebadua/i)&&Mb&&!kb.match(/silk/i)&&kb.match(/OS X 10_6_([3-7])/i),Qb="undefined"!=typeof console&&"undefined"!=typeof console.log,Rb="undefined"!=typeof nb.hasFocus?nb.hasFocus():null,Sb=Mb&&"undefined"==typeof nb.hasFocus,Tb=!Sb,Ub=/(mp3|mp4|mpa)/i,Vb="about:blank",Wb=nb.location?nb.location.protocol.match(/http/i):null,Xb=Wb?"":"http://",Yb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,Zb=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],$b=new RegExp("\\.("+Zb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Wb,this._global_a=null,K={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},Ob&&(fb.useHTML5Audio=!0,fb.preferFlash=!1,Hb&&(fb.ignoreFlash=!0,Gb=!0)),this.ok=function(){return Eb?sb&&!tb:fb.useHTML5Audio&&fb.hasHTML5},this.supported=this.ok,this.getMovie=function(a){return f(a)||nb[a]||lb[a]},this.createSound=function(a){function b(){return f=M(f),fb.sounds[h.id]=new e(h),fb.soundIDs.push(h.id),fb.sounds[h.id]}var c,d,f=null,g=null,h=null;return c=hb+".createSound(): ",d=c+H(sb?"notOK":"notReady"),sb&&fb.ok()?(2===arguments.length&&(a={id:arguments[0],url:arguments[1]}),f=m(a),f.url=T(f.url),h=f,h.id.toString().charAt(0).match(/^[0-9]$/)&&fb._wD(c+H("badID",h.id),2),fb._wD(c+h.id+" ("+h.url+")",1),P(h.id,!0)?(fb._wD(c+h.id+" exists",1),fb.sounds[h.id]):(V(h)?(g=b(),fb._wD("Loading sound "+h.id+" via HTML5"),g._setup_html5(h)):(i>8&&(null===h.isMovieStar&&(h.isMovieStar=h.serverURL||(h.type?h.type.match(Yb):!1)||h.url.match($b)),h.isMovieStar&&fb._wD(c+"using MovieStar handling"),h.isMovieStar&&(h.usePeakData&&(k("noPeak"),h.usePeakData=!1),h.loops>1&&k("noNSLoop"))),h=N(h,c),g=b(),8===i?gb._createSound(h.id,h.loops||1,h.usePolicyFile):(gb._createSound(h.id,h.url,h.usePeakData,h.useWaveformData,h.useEQData,h.isMovieStar,h.isMovieStar?h.bufferTime:!1,h.loops||1,h.serverURL,h.duration||null,h.autoPlay,!0,h.autoLoad,h.usePolicyFile),h.serverURL||(g.connected=!0,h.onconnect&&h.onconnect.apply(g))),h.serverURL||!h.autoLoad&&!h.autoPlay||g.load(h)),!h.serverURL&&h.autoPlay&&g.play(),g)):(O(d),!1)},this.destroySound=function(a,b){if(!P(a))return!1;var c,d=fb.sounds[a];for(d._iO={},d.stop(),d.unload(),c=0;c<fb.soundIDs.length;c++)if(fb.soundIDs[c]===a){fb.soundIDs.splice(c,1);break}return b||d.destruct(!0),d=null,delete fb.sounds[a],!0},this.load=function(a,b){return P(a)?fb.sounds[a].load(b):!1},this.unload=function(a){return P(a)?fb.sounds[a].unload():!1},this.onPosition=function(a,b,c,d){return P(a)?fb.sounds[a].onposition(b,c,d):!1},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return P(a)?fb.sounds[a].clearOnPosition(b,c):!1},this.play=function(a,b){return sb&&fb.ok()?P(a)?fb.sounds[a].play(b):(b instanceof Object||(b={url:b}),b&&b.url?(fb._wD(hb+'.play(): attempting to create "'+a+'"',1),b.id=a,fb.createSound(b).play()):!1):(O(hb+".play(): "+H(sb?"notOK":"notReady")),!1)},this.start=this.play,this.setPosition=function(a,b){return P(a)?fb.sounds[a].setPosition(b):!1},this.stop=function(a){return P(a)?(fb._wD(hb+".stop("+a+")",1),fb.sounds[a].stop()):!1},this.stopAll=function(){var a;fb._wD(hb+".stopAll()",1);for(a in fb.sounds)fb.sounds.hasOwnProperty(a)&&fb.sounds[a].stop()},this.pause=function(a){return P(a)?fb.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=fb.soundIDs.length;a--;)fb.sounds[fb.soundIDs[a]].pause()},this.resume=function(a){return P(a)?fb.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=fb.soundIDs.length;a--;)fb.sounds[fb.soundIDs[a]].resume()},this.togglePause=function(a){return P(a)?fb.sounds[a].togglePause():!1},this.setPan=function(a,b){return P(a)?fb.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return P(a)?fb.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;if("string"!=typeof a&&(a=null),a)return P(a)?(fb._wD(hb+'.mute(): Muting "'+a+'"'),fb.sounds[a].mute()):!1;for(fb._wD(hb+".mute(): Muting all sounds"),b=fb.soundIDs.length;b--;)fb.sounds[fb.soundIDs[b]].mute();return fb.muted=!0,!0},this.muteAll=function(){fb.mute()},this.unmute=function(a){var b;if("string"!=typeof a&&(a=null),a)return P(a)?(fb._wD(hb+'.unmute(): Unmuting "'+a+'"'),fb.sounds[a].unmute()):!1;for(fb._wD(hb+".unmute(): Unmuting all sounds"),b=fb.soundIDs.length;b--;)fb.sounds[fb.soundIDs[b]].unmute();return fb.muted=!1,!0},this.unmuteAll=function(){fb.unmute()},this.toggleMute=function(a){return P(a)?fb.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return gb&&8!==i&&(a=parseInt(gb._getMemoryUse(),10)),a},this.disable=function(a){var b;if("undefined"==typeof a&&(a=!1),tb)return!1;for(tb=!0,k("shutdown",1),b=fb.soundIDs.length;b--;)E(fb.sounds[fb.soundIDs[b]]);return l(a),_.remove(lb,"load",p),!0},this.canPlayMIME=function(a){var b;return fb.hasHTML5&&(b=W({type:a})),!Eb||b?b:a?!!((i>8?a.match(Yb):null)||a.match(fb.mimePattern)):null},this.canPlayURL=function(a){var b;return fb.hasHTML5&&(b=W({url:a})),!Eb||b?b:a?!!a.match(fb.filePattern):null},this.canPlayLink=function(a){return"undefined"!=typeof a.type&&a.type&&fb.canPlayMIME(a.type)?!0:fb.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)throw new Error(hb+".getSoundById(): sID is null/undefined");var c=fb.sounds[a];return c||b||fb._wD('"'+a+'" is an invalid sound ID.',2),c},this.onready=function(a,b){var c="onready";if(a&&a instanceof Function)return sb&&fb._wD(H("queue",c)),b||(b=lb),n(c,a,b),o(),!0;throw H("needFunction",c)},this.ontimeout=function(a,b){var c="ontimeout";if(a&&a instanceof Function)return sb&&fb._wD(H("queue",c)),b||(b=lb),n(c,a,b),o({type:c}),!0;throw H("needFunction",c)},this._writeDebug=function(a,b,c){var d,e,g,h="soundmanager-debug";if(!fb.debugMode)return!1;if("undefined"!=typeof c&&c&&(a=a+" | "+(new Date).getTime()),Qb&&fb.useConsole&&(g=wb[b],"undefined"!=typeof console[g]?console[g](a):console.log(a),fb.consoleOnly))return!0;try{if(d=f(h),!d)return!1;e=nb.createElement("div"),0===++vb%2&&(e.className="sm2-alt"),b="undefined"==typeof b?0:parseInt(b,10),e.appendChild(nb.createTextNode(a)),b&&(b>=2&&(e.style.fontWeight="bold"),3===b&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild)}catch(i){}return d=null,!0},this._wD=this._writeDebug,this._debug=function(){var a,b;for(k("currentObj",1),a=0,b=fb.soundIDs.length;b>a;a++)fb.sounds[fb.soundIDs[a]]._debug()},this.reboot=function(){fb._wD(hb+".reboot()"),fb.soundIDs.length&&fb._wD("Destroying "+fb.soundIDs.length+" SMSound objects...");var a,b;for(a=fb.soundIDs.length;a--;)fb.sounds[fb.soundIDs[a]].destruct();try{Kb&&(zb=gb.innerHTML),yb=gb.parentNode.removeChild(gb),fb._wD("Flash movie removed.")}catch(c){k("badRemove",2)}zb=yb=Eb=null,fb.enabled=y=sb=Ab=Bb=qb=rb=tb=fb.swfLoaded=!1,fb.soundIDs=fb.sounds=[],gb=null;for(a in ob)if(ob.hasOwnProperty(a))for(b=ob[a].length;b--;)ob[a][b].fired=!1;fb._wD(hb+": Rebooting..."),lb.setTimeout(fb.beginDelayedInit,20)},this.getMoviePercent=function(){return gb&&"undefined"!=typeof gb.PercentLoaded?gb.PercentLoaded():null},this.beginDelayedInit=function(){ub=!0,w(),setTimeout(function(){return Bb?!1:(A(),v(),Bb=!0,!0)},20),q()},this.destruct=function(){fb._wD(hb+".destruct()"),fb.disable(!0)},e=function(a){var b,c,d,e,f,g,h,l,n=this,o=!1,p=[],q=0,r=null,s={duration:null,time:null};this.sID=a.id,this.url=a.url,this.options=m(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(fb.debugMode){var a,b,c=null,d=[],e=64;for(c in n.options)null!==n.options[c]&&(n.options[c]instanceof Function?(a=n.options[c].toString(),a=a.replace(/\s\s+/g," "),b=a.indexOf("{"),d.push(" "+c+": {"+a.substr(b+1,Math.min(Math.max(a.indexOf("\n")-1,e),e)).replace(/\n/g,"")+"... }")):d.push(" "+c+": "+n.options[c]));fb._wD("SMSound() merged options: {\n"+d.join(", \n")+"\n}")}},this._debug(),this.load=function(a){var b,c=null;if("undefined"!=typeof a?(n._iO=m(a,n.options),n.instanceOptions=n._iO):(a=n.options,n._iO=a,n.instanceOptions=n._iO,r&&r!==n.url&&(k("manURL"),n._iO.url=n.url,n.url=null)),n._iO.url||(n._iO.url=n.url),n._iO.url=T(n._iO.url),fb._wD("SMSound.load(): "+n._iO.url,1),n._iO.url===n.url&&0!==n.readyState&&2!==n.readyState)return k("onURL",1),3===n.readyState&&n._iO.onload&&n._iO.onload.apply(n,[!!n.duration]),n;if(b=n._iO,r=n.url,n.loaded=!1,n.readyState=1,n.playState=0,V(b))c=n._setup_html5(b),c._called_load?fb._wD(jb+"ignoring request to load again: "+n.sID):(fb._wD(jb+"load: "+n.sID),n._html5_canplay=!1,n._a.autobuffer="auto",n._a.preload="auto",c.load(),c._called_load=!0,b.autoPlay&&n.play());else try{n.isHTML5=!1,n._iO=N(M(b)),b=n._iO,8===i?gb._load(n.sID,b.url,b.stream,b.autoPlay,b.whileloading?1:0,b.loops||1,b.usePolicyFile):gb._load(n.sID,b.url,!!b.stream,!!b.autoPlay,b.loops||1,!!b.autoLoad,b.usePolicyFile)}catch(d){k("smError",2),j("onload",!1),B({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return n},this.unload=function(){return 0!==n.readyState&&(fb._wD('SMSound.unload(): "'+n.sID+'"'),n.isHTML5?(e(),n._a&&(n._a.pause(),Y(n._a))):8===i?gb._unload(n.sID,Vb):gb._unload(n.sID),b()),n},this.destruct=function(a){fb._wD('SMSound.destruct(): "'+n.sID+'"'),n.isHTML5?(e(),n._a&&(n._a.pause(),Y(n._a),Gb||d(),n._a._t=null,n._a=null)):(n._iO.onfailure=null,gb._destroySound(n.sID)),a||fb.destroySound(n.sID,!0)},this.play=function(a,b){var c,d,e,h;if(c="SMSound.play(): ",b=void 0===b?!0:b,a||(a={}),n._iO=m(a,n._iO),n._iO=m(n._iO,n.options),n._iO.url=T(n._iO.url),n.instanceOptions=n._iO,n._iO.serverURL&&!n.connected)return n.getAutoPlay()||(fb._wD(c+" Netstream not connected yet - setting autoPlay"),n.setAutoPlay(!0)),n;if(V(n._iO)&&(n._setup_html5(n._iO),f()),1===n.playState&&!n.paused){if(d=n._iO.multiShot,!d)return fb._wD(c+'"'+n.sID+'" already playing (one-shot)',1),n;fb._wD(c+'"'+n.sID+'" already playing (multi-shot)',1)}if(n.loaded)fb._wD(c+'"'+n.sID+'"');else if(0===n.readyState)fb._wD(c+'Attempting to load "'+n.sID+'"',1),n.isHTML5||(n._iO.autoPlay=!0),n.load(n._iO);else{if(2===n.readyState)return fb._wD(c+'Could not load "'+n.sID+'" - exiting',2),n;fb._wD(c+'"'+n.sID+'" is loading - attempting to play..',1)}if(!n.isHTML5&&9===i&&n.position>0&&n.position===n.duration&&(fb._wD(c+'"'+n.sID+'": Sound at end, resetting to position:0'),a.position=0),n.paused&&n.position&&n.position>0)fb._wD(c+'"'+n.sID+'" is resuming from paused state',1),n.resume();else{if(n._iO=m(a,n._iO),null!==n._iO.from&&null!==n._iO.to&&0===n.instanceCount&&0===n.playState&&!n._iO.serverURL){if(h=function(){n._iO=m(a,n._iO),n.play(n._iO)},n.isHTML5&&!n._html5_canplay)return fb._wD(c+'Beginning load of "'+n.sID+'" for from/to case'),n.load({_oncanplay:h}),!1;if(!(n.isHTML5||n.loaded||n.readyState&&2===n.readyState))return fb._wD(c+'Preloading "'+n.sID+'" for from/to case'),n.load({onload:h}),!1;n._iO=l()}fb._wD(c+'"'+n.sID+'" is starting to play'),(!n.instanceCount||n._iO.multiShotEvents||!n.isHTML5&&i>8&&!n.getAutoPlay())&&n.instanceCount++,0===n.playState&&n._iO.onposition&&g(n),n.playState=1,n.paused=!1,n.position="undefined"==typeof n._iO.position||isNaN(n._iO.position)?0:n._iO.position,n.isHTML5||(n._iO=N(M(n._iO))),n._iO.onplay&&b&&(n._iO.onplay.apply(n),o=!0),n.setVolume(n._iO.volume,!0),n.setPan(n._iO.pan,!0),n.isHTML5?(f(),e=n._setup_html5(),n.setPosition(n._iO.position),e.play()):gb._start(n.sID,n._iO.loops||1,9===i?n._iO.position:n._iO.position/1e3)}return n},this.start=this.play,this.stop=function(a){var b,c=n._iO;return 1===n.playState&&(n._onbufferchange(0),n._resetOnPosition(0),n.paused=!1,n.isHTML5||(n.playState=0),h(),c.to&&n.clearOnPosition(c.to),n.isHTML5?n._a&&(b=n.position,n.setPosition(0),n.position=b,n._a.pause(),n.playState=0,n._onTimer(),e()):(gb._stop(n.sID,a),c.serverURL&&n.unload()),n.instanceCount=0,n._iO={},c.onstop&&c.onstop.apply(n)),n},this.setAutoPlay=function(a){fb._wD("sound "+n.sID+" turned autoplay "+(a?"on":"off")),n._iO.autoPlay=a,n.isHTML5||(gb._setAutoPlay(n.sID,a),a&&(n.instanceCount||1!==n.readyState||(n.instanceCount++,fb._wD("sound "+n.sID+" incremented instance count to "+n.instanceCount))))},this.getAutoPlay=function(){return n._iO.autoPlay},this.setPosition=function(a){void 0===a&&(a=0);var b,c,d,e=n.isHTML5?Math.max(a,0):Math.min(n.duration||n._iO.duration,Math.max(a,0));if(b=n.position,n.position=e,d=n.position/1e3,n._resetOnPosition(n.position),n._iO.position=e,n.isHTML5){if(n._a)if(n._html5_canplay){if(n._a.currentTime!==d){fb._wD("setPosition("+d+"): setting position");try{n._a.currentTime=d,(0===n.playState||n.paused)&&n._a.pause()}catch(f){fb._wD("setPosition("+d+"): setting position failed: "+f.message,2)}}}else fb._wD("setPosition("+d+"): delaying, sound not ready")}else c=9===i?n.position:d,n.readyState&&2!==n.readyState&&gb._setPosition(n.sID,c,n.paused||!n.playState);return n.isHTML5&&n.paused&&n._onTimer(!0),n},this.pause=function(a){return n.paused||0===n.playState&&1!==n.readyState?n:(fb._wD("SMSound.pause()"),n.paused=!0,n.isHTML5?(n._setup_html5().pause(),e()):(a||void 0===a)&&gb._pause(n.sID),n._iO.onpause&&n._iO.onpause.apply(n),n)},this.resume=function(){var a=n._iO;return n.paused?(fb._wD("SMSound.resume()"),n.paused=!1,n.playState=1,n.isHTML5?(n._setup_html5().play(),f()):(a.isMovieStar&&!a.serverURL&&n.setPosition(n.position),gb._pause(n.sID)),o&&a.onplay?(a.onplay.apply(n),o=!0):a.onresume&&a.onresume.apply(n),n):n},this.togglePause=function(){return fb._wD("SMSound.togglePause()"),0===n.playState?(n.play({position:9!==i||n.isHTML5?n.position/1e3:n.position}),n):(n.paused?n.resume():n.pause(),n)},this.setPan=function(a,b){return"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=!1),n.isHTML5||gb._setPan(n.sID,a),n._iO.pan=a,b||(n.pan=a,n.options.pan=a),n},this.setVolume=function(a,b){return"undefined"==typeof a&&(a=100),"undefined"==typeof b&&(b=!1),n.isHTML5?n._a&&(n._a.volume=Math.max(0,Math.min(1,a/100))):gb._setVolume(n.sID,fb.muted&&!n.muted||n.muted?0:a),n._iO.volume=a,b||(n.volume=a,n.options.volume=a),n},this.mute=function(){return n.muted=!0,n.isHTML5?n._a&&(n._a.muted=!0):gb._setVolume(n.sID,0),n},this.unmute=function(){n.muted=!1;var a="undefined"!=typeof n._iO.volume;return n.isHTML5?n._a&&(n._a.muted=!1):gb._setVolume(n.sID,a?n._iO.volume:n.options.volume),n},this.toggleMute=function(){return n.muted?n.unmute():n.mute()},this.onPosition=function(a,b,c){return p.push({position:a,method:b,scope:"undefined"!=typeof c?c:n,fired:!1}),n},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<p.length;c++)a===p[c].position&&(b&&b!==p[c].method||(p[c].fired&&q--,p.splice(c,1)))},this._processOnPosition=function(){var a,b,c=p.length;if(!c||!n.playState||q>=c)return!1;for(a=c;a--;)b=p[a],!b.fired&&n.position>=b.position&&(b.fired=!0,q++,b.method.apply(b.scope,[b.position]));return!0},this._resetOnPosition=function(a){var b,c,d=p.length;if(!d)return!1;for(b=d;b--;)c=p[b],c.fired&&a<=c.position&&(c.fired=!1,q--);return!0},l=function(){var a,b,c=n._iO,d=c.from,e=c.to;return b=function(){fb._wD(n.sID+': "to" time of '+e+" reached."),n.clearOnPosition(e,b),n.stop()},a=function(){fb._wD(n.sID+': playing "from" '+d),null===e||isNaN(e)||n.onPosition(e,b)},null===d||isNaN(d)||(c.position=d,c.multiShot=!1,a()),c},g=function(){var a=n._iO.onposition;if(a){var b;for(b in a)a.hasOwnProperty(b)&&n.onPosition(parseInt(b,10),a[b])}},h=function(){var a=n._iO.onposition;if(a){var b;for(b in a)a.hasOwnProperty(b)&&n.clearOnPosition(parseInt(b,10))}},f=function(){n.isHTML5&&Q(n)},e=function(){n.isHTML5&&R(n)},b=function(){p=[],q=0,o=!1,n._hasTimer=null,n._a=null,n._html5_canplay=!1,n.bytesLoaded=null,n.bytesTotal=null,n.duration=n._iO&&n._iO.duration?n._iO.duration:null,n.durationEstimate=null,n.eqData=[],n.eqData.left=[],n.eqData.right=[],n.failures=0,n.isBuffering=!1,n.instanceOptions={},n.instanceCount=0,n.loaded=!1,n.metadata={},n.readyState=0,n.muted=!1,n.paused=!1,n.peakData={left:0,right:0},n.waveformData={left:[],right:[]},n.playState=0,n.position=null},b(),this._onTimer=function(a){var b,c,d=!1,e={};return n._hasTimer||a?n._a&&(a||(n.playState>0||1===n.readyState)&&!n.paused)?(b=n._get_html5_duration(),b!==s.duration&&(s.duration=b,n.duration=b,d=!0),n.durationEstimate=n.duration,c=1e3*n._a.currentTime||0,c!==s.time&&(s.time=c,d=!0),(d||a)&&n._whileplaying(c,e,e,e,e),d):!1:void 0},this._get_html5_duration=function(){var a=n._iO,b=n._a?1e3*n._a.duration:a?a.duration:void 0,c=b&&!isNaN(b)&&1/0!==b?b:a?a.duration:null;return c},this._setup_html5=function(a){var d=m(n._iO,a),e=decodeURI,f=Gb?fb._global_a:n._a,g=e(d.url),h=f&&f._t?f._t.instanceOptions:null;if(f){if(f._t){if(!Gb&&g===e(r))return f;if(Gb&&h.url===d.url&&(!r||r===h.url))return f}fb._wD("setting new URL on existing object: "+g+(r?", old URL: "+r:"")),Gb&&f._t&&f._t.playState&&d.url!==h.url&&f._t.stop(),b(),f.src=d.url,n.url=d.url,r=d.url,f._called_load=!1}else fb._wD("creating HTML5 Audio() element with URL: "+g),f=new Audio(d.url),f._called_load=!1,Jb&&(f._called_load=!0),Gb&&(fb._global_a=f);return n.isHTML5=!0,n._a=f,f._t=n,c(),f.loop=d.loops>1?"loop":"",d.autoLoad||d.autoPlay?n.load():(f.autobuffer=!1,f.preload="none"),f.loop=d.loops>1?"loop":"",f},c=function(){function a(a,b,c){return n._a?n._a.addEventListener(a,b,c||!1):null}if(n._a._added_events)return!1;var b;fb._wD(jb+"adding event listeners: "+n.sID),n._a._added_events=!0;for(b in db)db.hasOwnProperty(b)&&a(b,db[b]);return!0},d=function(){function a(a,b,c){return n._a?n._a.removeEventListener(a,b,c||!1):null}var b;fb._wD(jb+"removing event listeners: "+n.sID),n._a._added_events=!1;for(b in db)db.hasOwnProperty(b)&&a(b,db[b])},this._onload=function(a){var b,c=!!a;return b="SMSound._onload(): ",fb._wD(b+'"'+n.sID+'"'+(c?" loaded.":" failed to load? - "+n.url),c?1:2),c||n.isHTML5||(fb.sandbox.noRemote===!0&&fb._wD(b+H("noNet"),1),fb.sandbox.noLocal===!0&&fb._wD(b+H("noLocal"),1)),n.loaded=c,n.readyState=c?3:2,n._onbufferchange(0),n._iO.onload&&n._iO.onload.apply(n,[c]),!0},this._onbufferchange=function(a){return 0===n.playState?!1:a&&n.isBuffering||!a&&!n.isBuffering?!1:(n.isBuffering=1===a,n._iO.onbufferchange&&(fb._wD("SMSound._onbufferchange(): "+a),n._iO.onbufferchange.apply(n)),!0)},this._onsuspend=function(){return n._iO.onsuspend&&(fb._wD("SMSound._onsuspend()"),n._iO.onsuspend.apply(n)),!0},this._onfailure=function(a,b,c){n.failures++,fb._wD('SMSound._onfailure(): "'+n.sID+'" count '+n.failures),n._iO.onfailure&&1===n.failures?n._iO.onfailure(n,a,b,c):fb._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var a=n._iO.onfinish;n._onbufferchange(0),n._resetOnPosition(0),n.instanceCount&&(n.instanceCount--,n.instanceCount||(h(),n.playState=0,n.paused=!1,n.instanceCount=0,n.instanceOptions={},n._iO={},e()),(!n.instanceCount||n._iO.multiShotEvents)&&a&&(fb._wD('SMSound._onfinish(): "'+n.sID+'"'),a.apply(n)))},this._whileloading=function(a,b,c,d){var e=n._iO;n.bytesLoaded=a,n.bytesTotal=b,n.duration=Math.floor(c),n.bufferLength=d,e.isMovieStar?(n.durationEstimate=n.duration,3!==n.readyState&&e.whileloading&&e.whileloading.apply(n)):(n.durationEstimate=e.duration?n.duration>e.duration?n.duration:e.duration:parseInt(n.bytesTotal/n.bytesLoaded*n.duration,10),void 0===n.durationEstimate&&(n.durationEstimate=n.duration),3!==n.readyState&&e.whileloading&&e.whileloading.apply(n))},this._whileplaying=function(a,b,c,d,e){var f=n._iO;if(isNaN(a)||null===a)return!1;if(n.position=a,n._processOnPosition(),!n.isHTML5&&i>8&&(f.usePeakData&&"undefined"!=typeof b&&b&&(n.peakData={left:b.leftPeak,right:b.rightPeak}),f.useWaveformData&&"undefined"!=typeof c&&c&&(n.waveformData={left:c.split(","),right:d.split(",")}),f.useEQData&&"undefined"!=typeof e&&e&&e.leftEQ)){var g=e.leftEQ.split(",");n.eqData=g,n.eqData.left=g,"undefined"!=typeof e.rightEQ&&e.rightEQ&&(n.eqData.right=e.rightEQ.split(","))}return 1===n.playState&&(n.isHTML5||8!==i||n.position||!n.isBuffering||n._onbufferchange(0),f.whileplaying&&f.whileplaying.apply(n)),!0},this._onmetadata=function(a,b){fb._wD('SMSound._onmetadata(): "'+this.sID+'" metadata received.');var c,d,e={};for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];n.metadata=e,n._iO.onmetadata&&n._iO.onmetadata.apply(n)},this._onid3=function(a,b){fb._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var c,d,e=[];for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];n.id3=m(n.id3,e),n._iO.onid3&&n._iO.onid3.apply(n)},this._onconnect=function(a){a=1===a,fb._wD('SMSound._onconnect(): "'+n.sID+'"'+(a?" connected.":" failed to connect? - "+n.url),a?1:2),n.connected=a,a&&(n.failures=0,P(n.sID)&&(n.getAutoPlay()?n.play(void 0,n.getAutoPlay()):n._iO.autoLoad&&n.load()),n._iO.onconnect&&n._iO.onconnect.apply(n,[a]))},this._ondataerror=function(a){n.playState>0&&(fb._wD("SMSound._ondataerror(): "+a),n._iO.ondataerror&&n._iO.ondataerror.apply(n))}},z=function(){return nb.body||nb._docElement||nb.getElementsByTagName("div")[0]},f=function(a){return nb.getElementById(a)},m=function(a,b){var c,d,e,f={};for(c in a)a.hasOwnProperty(c)&&(f[c]=a[c]);d="undefined"==typeof b?fb.defaultOptions:b;for(e in d)d.hasOwnProperty(e)&&"undefined"==typeof f[e]&&(f[e]=d[e]);return f},_=function(){function a(a){var b=Fb.call(a),c=b.length;return e?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function b(a,b){var c=a.shift(),d=[f[b]];e?c[d](a[0],a[1]):c[d].apply(c,a)}function c(){b(a(arguments),"add")}function d(){b(a(arguments),"remove")}var e=lb.attachEvent,f={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:c,remove:d}}(),db={abort:d(function(){fb._wD(jb+"abort: "+this._t.sID)}),canplay:d(function(){var a=this._t;if(a._html5_canplay)return!0;a._html5_canplay=!0,fb._wD(jb+"canplay: "+a.sID+", "+a.url),a._onbufferchange(0);var b=isNaN(a.position)?null:a.position/1e3;if(a.position&&this.currentTime!==b){fb._wD(jb+"canplay: setting position to "+b);try{this.currentTime=b}catch(c){fb._wD(jb+"setting position failed: "+c.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),load:d(function(){var a=this._t;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesTotal,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),emptied:d(function(){fb._wD(jb+"emptied: "+this._t.sID)}),ended:d(function(){var a=this._t;fb._wD(jb+"ended: "+a.sID),a._onfinish()}),error:d(function(){fb._wD(jb+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:d(function(){var a=this._t,b=a.bytesTotal||1;fb._wD(jb+"loadeddata: "+this._t.sID),a._loaded||Mb||(a.duration=a._get_html5_duration(),a._whileloading(b,b,a._get_html5_duration()),a._onload(!0))}),loadedmetadata:d(function(){fb._wD(jb+"loadedmetadata: "+this._t.sID)}),loadstart:d(function(){fb._wD(jb+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:d(function(){fb._wD(jb+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:d(function(){fb._wD(jb+"playing: "+this._t.sID),this._t._onbufferchange(0)}),progress:d(function(a){var b=this._t;if(b.loaded)return!1;var c,d,e,f=0,g="progress"===a.type,h=a.target.buffered,i=a.loaded||0,j=a.total||1;if(h&&h.length){for(c=h.length;c--;)f=h.end(c)-h.start(c);if(i=f/a.target.duration,g&&h.length>1){for(e=[],d=h.length,c=0;d>c;c++)e.push(a.target.buffered.start(c)+"-"+a.target.buffered.end(c));fb._wD(jb+"progress: timeRanges: "+e.join(", "))}g&&!isNaN(i)&&fb._wD(jb+"progress: "+b.sID+": "+Math.floor(100*i)+"% loaded")}isNaN(i)||(b._onbufferchange(0),b._whileloading(i,j,b._get_html5_duration()),i&&j&&i===j&&db.load.call(this,a))}),ratechange:d(function(){fb._wD(jb+"ratechange: "+this._t.sID)}),suspend:d(function(a){var b=this._t;fb._wD(jb+"suspend: "+b.sID),db.progress.call(this,a),b._onsuspend()}),stalled:d(function(){fb._wD(jb+"stalled: "+this._t.sID)}),timeupdate:d(function(){this._t._onTimer()}),waiting:d(function(){var a=this._t;fb._wD(jb+"waiting: "+a.sID),a._onbufferchange(1)})},V=function(a){return!a.serverURL&&(a.type?W({type:a.type}):W({url:a.url})||fb.html5Only)},Y=function(a){a&&(a.src=Ib?"":Vb)},W=function(a){function b(a){return fb.preferFlash&&ab&&!fb.ignoreFlash&&"undefined"!=typeof fb.flash[a]&&fb.flash[a]}if(!fb.useHTML5Audio||!fb.hasHTML5)return!1;var c,d,e,f,g=a.url||null,h=a.type||null,i=fb.audioFormats;if(h&&"undefined"!==fb.html5[h])return fb.html5[h]&&!b(h);if(!X){X=[];for(f in i)i.hasOwnProperty(f)&&(X.push(f),i[f].related&&(X=X.concat(i[f].related)));X=new RegExp("\\.("+X.join("|")+")(\\?.*)?$","i")}if(e=g?g.toLowerCase().match(X):null,e&&e.length)e=e[1];else{if(!h)return!1;d=h.indexOf(";"),e=(-1!==d?h.substr(0,d):h).substr(6)}return e&&"undefined"!=typeof fb.html5[e]?fb.html5[e]&&!b(e):(h="audio/"+e,c=fb.html5.canPlayType({type:h}),fb.html5[e]=c,c&&fb.html5[h]&&!b(h))},$=function(){function a(a){var b,c,d,f=!1;if(!e||"function"!=typeof e.canPlayType)return!1;if(a instanceof Array){for(c=0,d=a.length;d>c&&!f;c++)(fb.html5[a[c]]||e.canPlayType(a[c]).match(fb.html5Test))&&(f=!0,fb.html5[a[c]]=!0,fb.flash[a[c]]=!!(fb.preferFlash&&ab&&a[c].match(Ub)));return f}return b=e&&"function"==typeof e.canPlayType?e.canPlayType(a):!1,!(!b||!b.match(fb.html5Test))}if(!fb.useHTML5Audio||"undefined"==typeof Audio)return!1;var b,c,d,e="undefined"!=typeof Audio?Nb?new Audio(null):new Audio:null,f={};c=fb.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&(f[b]=a(c[b].type),f["audio/"+b]=f[b],fb.flash[b]=fb.preferFlash&&!fb.ignoreFlash&&b.match(Ub)?!0:!1,c[b]&&c[b].related))for(d=c[b].related.length;d--;)f["audio/"+c[b].related[d]]=f[b],fb.html5[c[b].related[d]]=f[b],fb.flash[c[b].related[d]]=f[b];return f.canPlayType=e?a:null,fb.html5=m(fb.html5,f),!0},u={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:ib+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:ib+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:hb+": Verify that %s is a valid path.",tryDebug:"Try "+hb+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:hb+": Non-HTTP page ("+nb.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:hb+": Special case: Waiting for focus-related event..",waitImpatient:hb+": Getting impatient, still waiting for Flash%s...",waitForever:hb+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:hb+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+hb+"._debug(): Current sound objects ---",waitEI:ib+"initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:hb+": Waiting for window.onload()",docLoaded:hb+": Document already loaded",onload:ib+"initComplete(): calling soundManager.onload()",onloadOK:hb+".onload() complete",init:ib+"init()",didInit:ib+"init(): Already called?",flashJS:hb+": Attempting to call Flash from JS..",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:hb+".disable(): Shutting down",queue:hb+": Queueing %s handler",smFail:hb+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+K.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:ib+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:hb+".load(): current URL already assigned.",badFV:hb+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},H=function(){var a,b,c=Fb.call(arguments),d=c.shift(),e=u&&u[d]?u[d]:"";if(e&&c&&c.length)for(a=0,b=c.length;b>a;a++)e=e.replace("%s",c[a]);return e},M=function(a){return 8===i&&a.loops>1&&a.stream&&(k("as2loop"),a.stream=!1),a
},N=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(fb._wD((b||"")+H("policy")),a.usePolicyFile=!0),a},O=function(a){"undefined"!=typeof console&&"undefined"!=typeof console.warn?console.warn(a):fb._wD(a)},g=function(){return!1},E=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=g);b=null},F=function(a){"undefined"==typeof a&&(a=!1),(tb||a)&&(k("smFail",2),fb.disable(a))},G=function(a){var b,c=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(c=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return b=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+fb.movieURL,fb.noSWFCache&&(b+="?ts="+(new Date).getTime()),b},s=function(){i=parseInt(fb.flashVersion,10),8!==i&&9!==i&&(fb._wD(H("badFV",i,xb)),fb.flashVersion=i=xb);var a=fb.debugMode||fb.debugFlash?"_debug.swf":".swf";fb.useHTML5Audio&&!fb.html5Only&&fb.audioFormats.mp4.required&&9>i&&(fb._wD(H("needfl9")),fb.flashVersion=i=9),fb.version=fb.versionNumber+(fb.html5Only?" (HTML5-only mode)":9===i?" (AS3/Flash 9)":" (AS2/Flash 8)"),i>8?(fb.defaultOptions=m(fb.defaultOptions,fb.flash9Options),fb.features.buffering=!0,fb.defaultOptions=m(fb.defaultOptions,fb.movieStarOptions),fb.filePatterns.flash9=new RegExp("\\.(mp3|"+Zb.join("|")+")(\\?.*)?$","i"),fb.features.movieStar=!0):fb.features.movieStar=!1,fb.filePattern=fb.filePatterns[8!==i?"flash9":"flash8"],fb.movieURL=(8===i?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),fb.features.peakData=fb.features.waveformData=fb.features.eqData=i>8},C=function(a,b){return gb?(gb._setPolling(a,b),void 0):!1},D=function(){if(fb.debugURLParam.test(mb)&&(fb.debugMode=!0),f(fb.debugID))return!1;var a,b,c,d,e;if(!(!fb.debugMode||f(fb.debugID)||Qb&&fb.useConsole&&fb.consoleOnly)){a=nb.createElement("div"),a.id=fb.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(nb.createTextNode("-")),a.onclick=L,a.title="Toggle SM2 debug console",kb.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=nb.createElement("div"),b.id=fb.debugID,b.style.display=fb.debugMode?"block":"none",fb.debugMode&&!f(a.id)){try{c=z(),c.appendChild(a)}catch(g){throw new Error(H("domError")+" \n"+g.toString())}c.appendChild(b)}}c=null},P=this.getSoundById,k=function(a,b){return a?fb._wD(H(a),b):""},mb.indexOf("sm2-debug=alert")+1&&fb.debugMode&&(fb._wD=function(b){a.alert(b)}),L=function(){var a=f(fb.debugID),b=f(fb.debugID+"-toggle");return a?(pb?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),pb=!pb,void 0):!1},j=function(a,b,c){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(a,b,c)}catch(d){}return!0},J=function(){var a=[];return fb.debugMode&&a.push(K.sm2Debug),fb.debugFlash&&a.push(K.flashDebug),fb.useHighPerformance&&a.push(K.highPerf),a.join(" ")},I=function(){var a=H("fbHandler"),b=fb.getMoviePercent(),c=K,d={type:"FLASHBLOCK"};return fb.html5Only?!1:(fb.ok()?(fb.didFlashBlock&&fb._wD(a+": Unblocked"),fb.oMC&&(fb.oMC.className=[J(),c.swfDefault,c.swfLoaded+(fb.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(Eb&&(fb.oMC.className=J()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),fb._wD(a+": "+H("fbTimeout")+(b?" ("+H("fbLoaded")+")":""))),fb.didFlashBlock=!0,o({type:"ontimeout",ignoreInit:!0,error:d}),B(d)),void 0)},n=function(a,b,c){"undefined"==typeof ob[a]&&(ob[a]=[]),ob[a].push({method:b,scope:c||null,fired:!1})},o=function(a){if(a||(a={type:"onready"}),!sb&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&fb.ok())return!1;var b,c,d={success:a&&a.ignoreInit?fb.ok():!tb},e=a&&a.type?ob[a.type]||[]:[],f=[],g=[d],h=Eb&&fb.useFlashBlock&&!fb.ok();for(a.error&&(g[0].error=a.error),b=0,c=e.length;c>b;b++)e[b].fired!==!0&&f.push(e[b]);if(f.length)for(fb._wD(hb+": Firing "+f.length+" "+a.type+"() item"+(1===f.length?"":"s")),b=0,c=f.length;c>b;b++)f[b].scope?f[b].method.apply(f[b].scope,g):f[b].method.apply(this,g),h||(f[b].fired=!0);return!0},p=function(){lb.setTimeout(function(){fb.useFlashBlock&&I(),o(),fb.onload instanceof Function&&(k("onload",1),fb.onload.apply(lb),k("onloadOK",1)),fb.waitForWindowLoad&&_.add(lb,"load",p)},1)},bb=function(){if(void 0!==ab)return ab;var a,b,c,d=!1,e=navigator,f=e.plugins,g=lb.ActiveXObject;if(f&&f.length)b="application/x-shockwave-flash",c=e.mimeTypes,c&&c[b]&&c[b].enabledPlugin&&c[b].enabledPlugin.description&&(d=!0);else if("undefined"!=typeof g){try{a=new g("ShockwaveFlash.ShockwaveFlash")}catch(h){}d=!!a}return ab=d,d},U=function(){var a,b,c=Hb&&!!kb.match(/os (1|2|3_0|3_1)/i);if(c)return fb.hasHTML5=!1,fb.html5Only=!0,fb.oMC&&(fb.oMC.style.display="none"),!1;if(!fb.useHTML5Audio)return!0;if(!fb.html5||!fb.html5.canPlayType)return fb._wD("SoundManager: No HTML5 Audio() support detected."),fb.hasHTML5=!1,!0;if(fb.hasHTML5=!0,Pb&&(fb._wD(ib+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ab?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1),bb()))return!0;for(b in fb.audioFormats)fb.audioFormats.hasOwnProperty(b)&&(fb.audioFormats[b].required&&!fb.html5.canPlayType(fb.audioFormats[b].type)||fb.flash[b]||fb.flash[fb.audioFormats[b].type])&&(a=!0);return fb.ignoreFlash&&(a=!1),fb.html5Only=fb.hasHTML5&&fb.useHTML5Audio&&!a,!fb.html5Only},T=function(a){var b,c,d=0;if(a instanceof Array){for(b=0,c=a.length;c>b;b++)if(a[b]instanceof Object){if(fb.canPlayMIME(a[b].type)){d=b;break}}else if(fb.canPlayURL(a[b])){d=b;break}return a[d].url&&(a[d]=a[d].url),a[d]}return a},Q=function(b){b._hasTimer||(b._hasTimer=!0,!Ob&&fb.html5PollingInterval&&(null===Db&&0===Cb&&(Db=a.setInterval(S,fb.html5PollingInterval)),Cb++))},R=function(a){a._hasTimer&&(a._hasTimer=!1,!Ob&&fb.html5PollingInterval&&Cb--)},S=function(){var b;if(null!==Db&&!Cb)return a.clearInterval(Db),Db=null,!1;for(b=fb.soundIDs.length;b--;)fb.sounds[fb.soundIDs[b]].isHTML5&&fb.sounds[fb.soundIDs[b]]._hasTimer&&fb.sounds[fb.soundIDs[b]]._onTimer()},B=function(a){a="undefined"!=typeof a?a:{},fb.onerror instanceof Function&&fb.onerror.apply(lb,[{type:"undefined"!=typeof a.type?a.type:null}]),"undefined"!=typeof a.fatal&&a.fatal&&fb.disable()},cb=function(){if(!Pb||!bb())return!1;var a,b,c=fb.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&("mp3"===b||"mp4"===b)&&(fb._wD(hb+": Using flash fallback for "+b+" format"),fb.html5[b]=!1,c[b]&&c[b].related))for(a=c[b].related.length;a--;)fb.html5[c[b].related[a]]=!1},this._setSandboxType=function(a){var b=fb.sandbox;b.type=a,b.description=b.types["undefined"!=typeof b.types[a]?a:"unknown"],fb._wD("Flash security sandbox type: "+b.type),"localWithFile"===b.type?(b.noRemote=!0,b.noLocal=!1,k("secNote",2)):"localWithNetwork"===b.type?(b.noRemote=!1,b.noLocal=!0):"localTrusted"===b.type&&(b.noRemote=!1,b.noLocal=!1)},this._externalInterfaceOK=function(a,b){if(fb.swfLoaded)return!1;var c,d=(new Date).getTime();return fb._wD(ib+"externalInterfaceOK()"+(a?" (~"+(d-a)+" ms)":"")),j("swf",!0),j("flashtojs",!0),fb.swfLoaded=!0,Sb=!1,Pb&&cb(),b&&b.replace(/\+dev/i,"")===fb.versionNumber.replace(/\+dev/i,"")?(Kb?setTimeout(h,100):h(),void 0):(c=hb+': Fatal: JavaScript file build "'+fb.versionNumber+'" does not match Flash SWF build "'+b+'" at '+fb.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(c)},0),!1)},A=function(a,b){function c(){fb._wD("-- SoundManager 2 "+fb.version+(!fb.html5Only&&fb.useHTML5Audio?fb.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(fb.html5Only?"":(fb.useHighPerformance?", high performance mode, ":", ")+((fb.flashPollingInterval?"custom ("+fb.flashPollingInterval+"ms)":"normal")+" polling")+(fb.wmode?", wmode: "+fb.wmode:"")+(fb.debugFlash?", flash debug mode":"")+(fb.useFlashBlock?", flashBlock mode":""))+" --",1)}function d(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(qb&&rb)return!1;if(fb.html5Only)return s(),c(),fb.oMC=f(fb.movieID),h(),qb=!0,rb=!0,!1;var e,g,i,j,l,m,n,o,p=b||fb.url,q=fb.altURL||p,r="JS/Flash audio component (SoundManager 2)",t=z(),u=J(),v="auto",w=null,x=nb.getElementsByTagName("html")[0];if(w=x&&x.dir&&x.dir.match(/rtl/i),a="undefined"==typeof a?fb.id:a,s(),fb.url=G(Wb?p:q),b=fb.url,fb.wmode=!fb.wmode&&fb.useHighPerformance?"transparent":fb.wmode,null!==fb.wmode&&(kb.match(/msie 8/i)||!Kb&&!fb.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(k("spcWmode"),fb.wmode=null),e={name:a,id:a,src:b,width:v,height:v,quality:"high",allowScriptAccess:fb.allowScriptAccess,bgcolor:fb.bgColor,pluginspage:Xb+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:fb.wmode,hasPriority:"true"},fb.debugFlash&&(e.FlashVars="debug=1"),fb.wmode||delete e.wmode,Kb)g=nb.createElement("div"),j=['<object id="'+a+'" data="'+b+'" type="'+e.type+'" title="'+e.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Xb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+e.width+'" height="'+e.height+'">',d("movie",b),d("AllowScriptAccess",fb.allowScriptAccess),d("quality",e.quality),fb.wmode?d("wmode",fb.wmode):"",d("bgcolor",fb.bgColor),d("hasPriority","true"),fb.debugFlash?d("FlashVars",e.FlashVars):"","</object>"].join("");else{g=nb.createElement("embed");for(i in e)e.hasOwnProperty(i)&&g.setAttribute(i,e[i])}if(D(),u=J(),t=z())if(fb.oMC=f(fb.movieID)||nb.createElement("div"),fb.oMC.id)o=fb.oMC.className,fb.oMC.className=(o?o+" ":K.swfDefault)+(u?" "+u:""),fb.oMC.appendChild(g),Kb&&(l=fb.oMC.appendChild(nb.createElement("div")),l.className=K.swfBox,l.innerHTML=j),rb=!0;else{if(fb.oMC.id=fb.movieID,fb.oMC.className=K.swfDefault+" "+u,m=null,l=null,fb.useFlashBlock||(fb.useHighPerformance?m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},w&&(m.left=Math.abs(parseInt(m.left,10))+"px"))),Lb&&(fb.oMC.style.zIndex=1e4),!fb.debugFlash)for(n in m)m.hasOwnProperty(n)&&(fb.oMC.style[n]=m[n]);try{Kb||fb.oMC.appendChild(g),t.appendChild(fb.oMC),Kb&&(l=fb.oMC.appendChild(nb.createElement("div")),l.className=K.swfBox,l.innerHTML=j),rb=!0}catch(y){throw new Error(H("domError")+" \n"+y.toString())}}return qb=!0,c(),fb._wD(ib+"createMovie(): Trying to load "+b+(!Wb&&fb.altURL?" (alternate URL)":""),1),!0},v=function(){return fb.html5Only?(A(),!1):gb?!1:(gb=fb.getMovie(fb.id),gb||(yb?(Kb?fb.oMC.innerHTML=zb:fb.oMC.appendChild(yb),yb=null,qb=!0):A(fb.id,fb.url),gb=fb.getMovie(fb.id)),gb&&k("waitEI"),fb.oninitmovie instanceof Function&&setTimeout(fb.oninitmovie,1),!0)},q=function(){setTimeout(r,1e3)},r=function(){if(Ab)return!1;if(Ab=!0,_.remove(lb,"load",q),Sb&&!Rb)return k("waitFocus"),!1;var a;sb||(a=fb.getMoviePercent(),fb._wD(H("waitImpatient",100===a?" (SWF loaded)":a>0?" (SWF "+a+"% loaded)":""))),setTimeout(function(){a=fb.getMoviePercent(),sb||(fb._wD(hb+": No Flash response within expected time.\nLikely causes: "+(0===a?"Loading "+fb.movieURL+" may have failed (and/or Flash "+i+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(fb.debugFlash?" "+H("checkSWF"):""),2),!Wb&&a&&(k("localFail",2),fb.debugFlash||k("tryDebug",2)),0===a&&fb._wD(H("swf404",fb.url)),j("flashtojs",!1," (Check flash security or flash blockers)")),!sb&&Tb&&(null===a?fb.useFlashBlock||0===fb.flashLoadTimeout?(fb.useFlashBlock&&I(),k("waitForever")):F(!0):0===fb.flashLoadTimeout?k("waitForever"):F(!0))},fb.flashLoadTimeout)},t=function(){function a(){_.remove(lb,"focus",t),_.remove(lb,"load",t)}return Rb||!Sb?(a(),!0):(Tb=!0,Rb=!0,fb._wD(ib+"handleFocus()"),Mb&&Sb&&_.remove(lb,"mousemove",t),Ab=!1,a(),!0)},eb=function(){var a,b=[];if(fb.useHTML5Audio&&fb.hasHTML5){for(a in fb.audioFormats)fb.audioFormats.hasOwnProperty(a)&&b.push(a+": "+fb.html5[a]+(!fb.html5[a]&&ab&&fb.flash[a]?" (using flash)":fb.preferFlash&&fb.flash[a]&&ab?" (preferring flash)":fb.html5[a]?"":" ("+(fb.audioFormats[a].required?"required, ":"")+"and no flash support)"));fb._wD("-- SoundManager 2: HTML5 support tests ("+fb.html5Test+"): "+b.join(", ")+" --",1)}},l=function(a){if(sb)return!1;if(fb.html5Only)return fb._wD("-- SoundManager 2: loaded --"),sb=!0,p(),j("onload",!0),!0;var b,c=fb.useFlashBlock&&fb.flashLoadTimeout&&!fb.getMoviePercent();return c||(sb=!0,tb&&(b={type:!ab&&Eb?"NO_FLASH":"INIT_TIMEOUT"})),fb._wD("-- SoundManager 2 "+(tb?"failed to load":"loaded")+" ("+(tb?"security/load error":"OK")+") --",1),tb||a?(fb.useFlashBlock&&fb.oMC&&(fb.oMC.className=J()+" "+(null===fb.getMoviePercent()?K.swfTimedout:K.swfError)),o({type:"ontimeout",error:b}),j("onload",!1),B(b),!1):(j("onload",!0),fb.waitForWindowLoad&&!ub?(k("waitOnload"),_.add(lb,"load",p),!1):(fb.waitForWindowLoad&&ub&&k("docLoaded"),p(),!0))},h=function(){function a(){_.remove(lb,"load",fb.beginDelayedInit)}if(k("init"),sb)return k("didInit"),!1;if(fb.html5Only)return sb||(a(),fb.enabled=!0,l()),!0;v();try{k("flashJS"),gb._externalInterfaceTest(!1),C(!0,fb.flashPollingInterval||(fb.useHighPerformance?10:50)),fb.debugMode||gb._disableDebug(),fb.enabled=!0,j("jstoflash",!0),fb.html5Only||_.add(lb,"unload",g)}catch(b){return fb._wD("js/flash exception: "+b.toString()),j("jstoflash",!1),B({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),F(!0),l(),!1}return l(),a(),!0},w=function(){return y?!1:(y=!0,D(),function(){var a="sm2-usehtml5audio=",b=mb.toLowerCase(),c=null,d="sm2-preferflash=",e=null,f="undefined"!=typeof console&&"undefined"!=typeof console.log;-1!==b.indexOf(a)&&(c="1"===b.charAt(b.indexOf(a)+a.length),f&&console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),fb.useHTML5Audio=c),-1!==b.indexOf(d)&&(e="1"===b.charAt(b.indexOf(d)+d.length),f&&console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),fb.preferFlash=e)}(),!ab&&fb.hasHTML5&&(fb._wD("SoundManager: No Flash detected"+(fb.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),fb.useHTML5Audio=!0,fb.preferFlash=!1),$(),fb.html5.usingFlash=U(),Eb=fb.html5.usingFlash,eb(),!ab&&Eb&&(fb._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),fb.flashLoadTimeout=1),nb.removeEventListener&&nb.removeEventListener("DOMContentLoaded",w,!1),v(),!0)},Z=function(){return"complete"===nb.readyState&&(w(),nb.detachEvent("onreadystatechange",Z)),!0},x=function(){ub=!0,_.remove(lb,"load",x)},bb(),_.add(lb,"focus",t),_.add(lb,"load",t),_.add(lb,"load",q),_.add(lb,"load",x),Mb&&Sb&&_.add(lb,"mousemove",t),nb.addEventListener?nb.addEventListener("DOMContentLoaded",w,!1):nb.attachEvent?nb.attachEvent("onreadystatechange",Z):(j("onload",!1),B({type:"NO_DOM2_EVENTS",fatal:!0})),"complete"===nb.readyState&&setTimeout(w,100)}var c=null;a.SoundManager=b,a.soundManager=c}(window),function(){var a=Array.prototype.slice,b={on:function(a,b,c){if(!d(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var e=this._events[a]||(this._events[a]=[]);return e.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!d(this,"once",a,[b,c])||!b)return this;var e=this,f=_.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var e,f,g,h,i,j,k,l;if(!this._events||!d(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:_.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||c)for(k=0,l=g.length;l>k;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(b){if(!this._events)return this;var c=a.call(arguments,1);if(!d(this,"trigger",b,c))return this;var f=this._events[b],g=this._events.all;return f&&e(f,c),g&&e(g,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},c=/\s+/,d=function(a,b,d,e){if(!d)return!0;if("object"==typeof d){for(var f in d)a[b].apply(a,[f,d[f]].concat(e));return!1}if(c.test(d)){for(var g=d.split(c),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(e));return!1}return!0},e=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},f={listenTo:"on",listenToOnce:"once"};_.each(f,function(a,c){b[c]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=_.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),window.Feed=window.Feed||{},window.Feed.Events=b}(),function(){if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)for(var a=["log","info","warn","error","assert","dir","clear","profile","profileEnd"],b=0;b<a.length;b++){var c=a[b];console[c]=Function.prototype.bind.call(console,console[c])}var d=function(){if(d.history=d.history||[],d.history.push(arguments),"undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var a=0;a<arguments.length;)console.log("Item "+(a+1)+": "+arguments[a]),a++;else 1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log.apply(console,Array.prototype.slice.call(arguments));else if(Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log)if(document.getElementById("firebug-lite"))setTimeout(function(){d(Array.prototype.slice.call(arguments))},500);else{var b=document.createElement("script");b.type="text/javascript",b.id="firebug-lite",b.src="https://getfirebug.com/firebug-lite.js",document.getElementsByTagName("HEAD")[0].appendChild(b),setTimeout(function(){d(Array.prototype.slice.call(arguments))},2e3)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))};window.Feed=window.Feed||{},window.Feed.log=d}(),function(){var a=window.Feed.log,b=function(a){var b=_.extend(this,window.Feed.Events);return a&&_.each(a,function(a,c){b.on(c,a)}),b};b.prototype={play:function(){this.songObject&&this.songObject.play()},pause:function(){this.songObject&&this.songObject.pause()},resume:function(){this.songObject&&this.songObject.resume()},position:function(){return this.songObject?this.songObject.position:0},duration:function(){if(this.songObject){var a=this.songObject.duration;return a?a:1}return 1},destroy:function(){a("destroy triggered for",this.id),this.songObject&&(delete d.outstandingPlays[this.id],this.songObject.destruct(),this.songObject=null),this.off()},_nonRepeatTrigger:function(a){this.lastTrigger!==a&&(this.lastTrigger=a,this.trigger.apply(this,Array.prototype.slice.call(arguments,0)))}};var c=function(b){var c=this;window.soundManager=new SoundManager,window.soundManager.wmode="transparent",window.soundManager.useHighPerformance=!0,window.soundManager.flashPollingInterval=500,window.soundManager.html5PollingInterval=500,b=b||{},window.soundManager.debugMode=b.debug||!1,window.soundManager.debugFlash=b.debug||!1,window.soundManager.preferFlash=b.preferFlash||!1,window.soundManager.url=b.swfBase||"",window.soundManager.onready(function(){c.createSongObject=function(a){return window.soundManager.createSound(a)},_.each(c.outstandingPlays,function(b){var d=b.songObject.playing;c._assignSongObject(b),d&&(a("playing already created sound"),b.songObject.play())})}),this.silence=b.silence||"/sample/5seconds.mp3",window.soundManager.beginDelayedInit()};c.prototype={vol:100,outstandingPlays:{},mobileInitialized:!1,createSongObject:function(a){return{fake:!0,playing:!1,options:a,setVolume:function(){},play:function(){this.playing=!0},pause:function(){this.playing=!1},resume:function(){this.playing=!0},destruct:function(){}}},initializeForMobile:function(){if(!this.mobileInitialized){var a=this.createSongObject({id:"silence",url:this.silence,volume:0,autoPlay:!0,type:"audio/mp3"});this.mobileInitialized=!a.fake}},create:function(a,c){var d=new b(c);return d.id=_.uniqueId("play"),d.url=a,this.outstandingPlays[d.id]=d,this._assignSongObject(d),d},_assignSongObject:function(b){var c=this;return b.songObject=this.createSongObject({id:b.id,url:b.url,volume:c.vol,autoPlay:!1,type:"audio/mp3",onfinish:function(){this.destruct(),delete c.outstandingPlays[b.id],b._nonRepeatTrigger("finish")},onid3:function(){a(b.id+": onid3")},onstop:function(){a(b.id+": onstop")},onsuspend:function(){a(b.id+": suspend")},onresume:function(){a(b.id+": onresume"),b._nonRepeatTrigger("play")},onplay:function(){a(b.id+": onplay"),b._nonRepeatTrigger("play")},onpause:function(){a(b.id+": pause"),b._nonRepeatTrigger("pause")},onload:function(c){a(b.id+": onload",c),c||(a(b.id+" failure!"),b._nonRepeatTrigger("finish"),b.destroy())},ondataerror:function(){a(b.id+": ondataerror"),b._nonRepeatTrigger("finish"),b.destroy()},onconnect:function(){a(b.id+": onconnect")},onbufferchange:function(){a(b.id+": onbufferchange")}}),b},setVolume:function(a){return"undefined"!=typeof a&&(this.vol=a,_.each(this.outstandingPlays,function(b){b.songObject.setVolume(a)}),this.trigger("volume",a)),this.vol}},_.extend(c.prototype,window.Feed.Events),window.Feed=window.Feed||{};var d=null;window.Feed.getSpeaker=function(a){return null===d&&(d=new c(a)),d}}(),function(){function a(a,b,c){a=a?2*a:200,a>b&&(a=b),setTimeout(function(){c(a)},a)}function b(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}var c=window.Feed.log;OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA256","HMAC-SHA256-Accessor"],OAuth.SignatureMethod.makeSubclass(function(a){var b=CryptoJS.HmacSHA256(a,this.key),c=b.toString(CryptoJS.enc.Base64);return c}));var d=function(a,b){this.config={baseUrl:"http://feed.fm",formats:"mp3,aac",maxBitrate:128,timeOffset:0,current:null,pendingRequest:null,pendingPlay:null},_.extend(this,window.Feed.Events),a&&b&&this.setCredentials(a,b)};d.prototype.setBaseUrl=function(a){this.config.baseUrl=a},d.prototype.setCredentials=function(a,b){this.config.token=a,this.config.secret=b},d.prototype._synchronizeClock=function(){var a=this;this._ajax({url:this.config.baseUrl+"/api/v2/oauth/time",type:"GET"}).then(function(b){if(b&&b.success){var c=b.result,d=Date.now()/1e3;a.config.timeSkew=c-d}}).fail(function(){c("clock synchronization failed")})},d.prototype.setPlacementId=function(a){this.config.placementId=a,this.trigger("placement-changed",a),this._retune()},d.prototype.setStationId=function(a){this.config.stationId=a,this.trigger("station-changed",a),this._retune()},d.prototype.setFormats=function(a){this.config.formats=a,this._retune()},d.prototype.setMaxBitrate=function(a){this.config.maxBitrate=a},d.prototype.tune=function(){if(!this.config.token)throw new Error("no token set with setCredentials()");if(!this.config.secret)throw new Error("no secret set with setCredentials()");if(!this.config.placementId)throw new Error("no placementId set");this._getPlacementInformation(),this.config.pendingRequest=null,this.config.pendingPlay=null,this._assignCurrentPlay(null,!0),this._requestNextPlay()},d.prototype._getPlacementInformation=function(a){function b(a){d.trigger("placement",a)}var d=this;if(!this.config.placementId)throw new Error("no placementId set");this._getClientId().then(function(){var e={url:d.config.baseUrl+"/api/v2/placement/"+d.config.placementId,type:"GET",dataType:"json",timeout:6e3,data:{client_id:d.config.clientId}};c("requesting placement information from server"),d._signedAjax(e).done(_.bind(d._receivePlacementInformation,d,b)).fail(_.bind(d._failedPlacementInformation,d,a,e,b))})},d.prototype._receivePlacementInformation=function(a,b){b&&b.success&&b.placement&&a(b.placement)},d.prototype._failedPlacementInformation=function(a,b,c){a=a?2*a:500,_.delay(_.bind(this.getPlacementInformation,this,c,a),a)},d.prototype.getActivePlay=function(){return this.config.current?this.config.current.play:null},d.prototype.isTuned=function(){return this.config.current||this.config.pendingRequest},d.prototype.hasActivePlayStarted=function(){return this.config.current&&this.config.current.started},d.prototype._retune=function(){this.isTuned()&&this.tune()},d.prototype.reportPlayStarted=function(){if(!this.config.current)throw new Error("attempt to report a play started, but there is no active play");this._startPlay(this.config.current.play)},d.prototype.reportPlayElapsed=function(a){if(!this.config.current)throw new Error("attempt to report elapsed play time, but the play hasn't started");this._signedAjax({url:this.config.baseUrl+"/api/v2/play/"+this.config.current.play.id+"elapse",type:"POST",data:{seconds:a}})},d.prototype.reportPlayCompleted=function(){if(!this.config.current||!this.config.current.started)throw c("finish on non-active or playing song"),new Error("no active or playing song");if(this._signedAjax({url:this.config.baseUrl+"/api/v2/play/"+this.config.current.play.id+"/complete",type:"POST"}),this.config.pendingRequest)c("song finished, but we're still waiting for next one to return"),this._assignCurrentPlay(null,!0);else{c("song finished, and no outstanding request, so playing pendingPlay");var a=this.config.pendingPlay;this.config.pendingPlay=null,this._assignCurrentPlay(a)}},d.prototype.requestSkip=function(){if(!this.config.current)throw new Error("No song being played");if(!this.config.current.started)throw new Error("No song has been started");return this.config.current.canSkip?(this._signedAjax({url:this.config.baseUrl+"/api/v2/play/"+this.config.current.play.id+"/skip",type:"POST"}).done(_.bind(this._receiveSkip,this,this.config.current.play)).fail(_.bind(this._failSkip,this,this.config.current.play)),void 0):(this.trigger("skip-denied"),void 0)},d.prototype.requestInvalidate=function(){if(!this.config.current)throw new Error("No active song to invalidate!");this._sendInvalidate(this.config.current.play)},d.prototype._sendInvalidate=function(a,b){this._signedAjax({url:this.config.baseUrl+"/api/v2/play/"+a.id+"/invalidate",type:"POST"}).done(_.bind(this._receiveInvalidate,this,a)).fail(_.bind(this._failInvalidate,this,b,a))},d.prototype._failInvalidate=function(a,b,d){var e=this;a=a?2*a:200,3e3>a?_.delay(function(){e._sendInvalidate(b)},a):c("gave up trying to invalidate play",d)},d.prototype._receiveInvalidate=function(a,b){if(!this.config.current||this.config.current.play===a){if(!b.success)return c("failed invalidate! - technically this is impossible"),void 0;if(this.config.pendingPlay){c("invalidating to song already queued up");var d=this.config.pendingPlay;this.config.pendingPlay=null,this._assignCurrentPlay(d)}else c("invalidating current song"),this._assignCurrentPlay(null,!0),this.config.pendingRequest||(c("queueing up new song"),this._requestNextPlay())}},d.prototype._failSkip=function(a){this.config.current&&this.config.current.play!==a||this.trigger("skip-denied")},d.prototype._receiveSkip=function(a,b){if(!this.config.current||this.config.current.play===a){if(!b.success)return c("failed skip!"),this.trigger("skip-denied"),void 0;if(this.config.pendingPlay){c("skipping to song already queued up");var d=this.config.pendingPlay;this.config.pendingPlay=null,this._assignCurrentPlay(d)}else this.config.pendingRequest?(c("skipping to what is queued up"),this._assignCurrentPlay(null,!0)):(c("skipping to what is queued up"),this._assignCurrentPlay(null))}},d.prototype._startPlay=function(a){this.config.current.retryCount>2?this._receiveStartPlay(a,!1):(c("telling server we're starting the play",a),this._signedAjax({url:this.config.baseUrl+"/api/v2/play/"+a.id+"/start",type:"POST",dataType:"json",timeout:3e3,data:{id:a.id}}).done(_.bind(this._receiveStartPlay,this,a)).fail(_.bind(this._failStartPlay,this,a)))},d.prototype._receiveStartPlay=function(a,b){b.success?this.config.current&&this.config.current.play===a?(this.config.current.canSkip=b.can_skip,this.config.current.started=!0,this.trigger("play-started",a),this._requestNextPlay()):c("received start play, but not waiting any more"):c("received failed start success")},d.prototype._failStartPlay=function(a){this.config.current&&this.config.current.play===a?(c("request failed - trying again in 1 second"),this.config.current.retryCount++,_.delay(_.bind(this._startPlay,this,a),1e3)):c("startPlay failed, but we don't care any more")},d.prototype._assignCurrentPlay=function(a,b){this.config.current&&(this.trigger("play-completed",this.config.current.play),this.config.current=null),null===a?b?c("nothing to play... waiting"):(c("nothing to play from the current station"),this.trigger("plays-exhausted")):(this.config.current={play:a,canSkip:!1,started:!1,retryCount:0},c("activated new song"),this.trigger("play-active",a))},d.prototype._requestNextPlay=function(a){if(this.config.pendingRequest)return this.config.pendingRequest.inprogress?(c("tried to get another play while we're loading one up"),void 0):a>6e4?(c("giving up on retrieving next play"),this.config.pendingRequest=null,null==this.config.current&&this._assignCurrentPlay(null),void 0):(this.config.pendingRequest.retryCount++,this._signedAjax(this.config.pendingRequest.ajax).done(_.bind(this._receiveNextPlay,this,this.config.pendingRequest.ajax)).fail(_.bind(this._failedNextPlay,this,a,this.config.pendingRequest.ajax)),void 0);var b=this;b.config.pendingRequest={inprogress:!0},this._getClientId().then(function(){if(b.config.pendingRequest&&b.config.pendingRequest.inprogress){var d={url:b.config.baseUrl+"/api/v2/play",type:"POST",dataType:"json",timeout:6e3,data:{placement_id:b.config.placementId,formats:b.config.formats,client_id:b.config.clientId,max_bitrate:b.config.maxBitrate}};b.config.stationId&&(d.data.station_id=b.config.stationId),b.config.pendingRequest={ajax:d,retryCount:0},c("requesting new play from server"),b._signedAjax(d).done(_.bind(b._receiveNextPlay,b,d)).fail(_.bind(b._failedNextPlay,b,a,d))}})},d.prototype._receiveNextPlay=function(a,b){this.config.pendingRequest&&this.config.pendingRequest.ajax===a?(this.config.pendingRequest=null,b.success?this.config.current?(c("received play, but we're already playing, so queueing up",b.play),this.config.pendingPlay=b.play):(c("received play and no current song, so playing now",b.play),this._assignCurrentPlay(b.play)):b.error&&9===b.error.code?this.config.current?(c("ran out of music to play, but we're already playing"),this.config.pendingPlay=null):(c("ran out of music, and nothing playing now"),this.trigger("plays-exhausted")):c("unsuccessful response",b)):c("nextPlay succeeded, but we don't care")},d.prototype._failedNextPlay=function(a,b){this.config.pendingRequest&&this.config.pendingRequest.ajax===b?(c("request failed - trying again"),a=a?2*a:500,_.delay(_.bind(this._requestNextPlay,this,a),a)):c("nextPlay failed, but we don't care")},d.prototype._synchronizeServerTime=function(){if(this.timePromise)return this.timePromise;var a=$.Deferred();this.timePromise=a.promise();var b=this;return a.then(function(a){var c=b._unixTime();b.config.timeOffset=a-c}),this._requestServerTime(a),this.timePromise},d.prototype._requestServerTime=function(b,c){var d=this;this._ajax({url:d.config.baseUrl+"/api/v2/oauth/time",type:"GET"}).done(function(e){e.success?b.resolve(e.time):a(c,2e3,function(a){d._requestServerTime(b,a)})}).fail(function(){a(c,2e3,function(a){d._requestServerTime(b,a)})})},d.prototype._getClientId=function(){if(this.clientPromise)return this.clientPromise;
var a=new $.Deferred;this.clientPromise=a.promise();var b=this;return this.clientPromise.then(function(a){b.config.clientId=a,b._setStoredCid(b.config.clientId)}),this._requestClientId(a),this.clientPromise},d.prototype._requestClientId=function(b,c){var d=this._getStoredCid();if(d)return b.resolve(d);var e=this;this._signedAjax({url:e.config.baseUrl+"/api/v2/client",type:"POST"}).done(function(d){d.success?b.resolve(d.client_id):a(c,2e3,function(a){e._requestClientId(b,a)})}).fail(function(){a(c,2e3,function(a){e._requestClientId(b,a)})})},d.prototype.maybeCanSkip=function(){return this.config.current&&this.config.current.started&&this.config.current.canSkip};var e="cid";d.prototype._getStoredCid=function(){return b()?localStorage[e]:$.cookie(e)},d.prototype._setStoredCid=function(a){b()?localStorage[e]=a:$.cookie(e,a,{expires:3650,path:"/"})},d.prototype._deleteStoredCid=function(){b()?localStorage.removeItem(e):$.removeCookie(e,{path:"/"})},d.prototype._unixTime=function(){return Math.floor(Date.now()/1e3)},d.prototype._makeNonce=function(){return Math.random().toString(36).substring(8)},d.prototype._sign=function(a){var b={action:a.url,method:a.type,parameters:{oauth_timestamp:this._unixTime()+this.config.timeOffset,oauth_nonce:this._makeNonce(),oauth_signature_method:"HMAC-SHA256"}};return $.extend(b.parameters,a.data),OAuth.completeRequest(b,{consumerKey:this.config.token,consumerSecret:this.config.secret}),a.headers={Authorization:OAuth.getAuthorizationHeader("Feed.fm",b.parameters)},a},d.prototype._signedAjax=function(a){var b=this,c=$.Deferred();return this._synchronizeServerTime().then(function(){b._ajax(b._sign(a)).then(function(a){c.resolve(a)}).fail(function(a){c.reject(a)})}),c},d.prototype._ajax=function(a){return $.ajax(a)},window.Feed=window.Feed||{},window.Feed.Session=d}(),function(){function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}var b=window.Feed.log,c=function(a,c,d){this.state={paused:!0},d=d||{},_.extend(this,window.Feed.Events),this.session=new window.Feed.Session(a,c),this.session.on("play-active",this._onPlayActive,this),this.session.on("play-completed",this._onPlayCompleted,this),this.session.on("plays-exhausted",this._onPlaysExhausted,this),this.speaker=window.Feed.getSpeaker(d),this.setMuted(this.isMuted()),this.session.on("all",function(){b("proxying from",this,arguments),this.trigger.apply(this,Array.prototype.slice.call(arguments,0))},this)};c.prototype.setPlacementId=function(a){this.session.setPlacementId(a)},c.prototype.setStationId=function(a){this.session.setStationId(a)},c.prototype.setBaseUrl=function(a){this.session.setBaseUrl(a)},c.prototype._onPlayActive=function(a){var b=this.speaker.create(a.audio_file.url,{play:_.bind(this._onSoundPlay,this),pause:_.bind(this._onSoundPause,this),finish:_.bind(this._onSoundFinish,this)});if(this.state.activePlay={id:a.id,sound:b,playCount:0},!this.state.paused){var c=this.state.activePlay.sound;setTimeout(function(){c.play()},1)}},c.prototype._onSoundPlay=function(){if(!this.state.activePlay)throw new Error("got an onSoundPlay, but no active play?");return this.state.activePlay.playCount++,this.state.paused=!1,1===this.state.activePlay.playCount?this.session.reportPlayStarted():(this.trigger("play-resumed",this.session.getActivePlay()),void 0)},c.prototype._onSoundPause=function(){if(!this.state.activePlay)throw new Error("got an onSoundPause, but no active play?");this.state.paused=!0,this.trigger("play-paused",this.session.getActivePlay())},c.prototype._onSoundFinish=function(){if(!this.state.activePlay)throw new Error("got an onSoundFinished, but no active play?");this.session.reportPlayCompleted()},c.prototype._onPlayCompleted=function(){if(!this.state.activePlay)throw new Error("got onPlayCompleted, but no active play!");this.state.activePlay.sound.destroy(),delete this.state.activePlay,this.state.paused=!1},c.prototype._onPlaysExhausted=function(){this.state.paused=!1},c.prototype.isPaused=function(){return this.session.isTuned()&&this.state.paused},c.prototype.getStationInformation=function(a){return this.session.getStationInformation(a)},c.prototype.tune=function(){this.session.isTuned()||this.session.tune()},c.prototype.play=function(){return this.speaker.initializeForMobile(),this.session.isTuned()?(this.session.getActivePlay&&this.state.activePlay&&this.state.paused?this.state.activePlay.playCount>1?this.state.activePlay.sound.resume():this.state.activePlay.sound.play():b("state",this.state),void 0):(this.state.paused=!1,this.session.tune())},c.prototype.pause=function(){this.session.hasActivePlayStarted()&&this.state.activePlay&&!this.state.paused&&this.state.activePlay.sound.pause()},c.prototype.skip=function(){this.session.hasActivePlayStarted()&&this.session.requestSkip()},c.prototype.destroy=function(){this.session=null,this.state.activePlay&&this.state.activePlay.sound&&this.state.activePlay.sound.destroy()},c.prototype.getCurrentState=function(){return this.session.hasActivePlayStarted()?this.state.paused?"paused":"playing":"idle"},c.prototype.getPosition=function(){return this.state.activePlay&&this.state.activePlay.sound?this.state.activePlay.sound.position():0},c.prototype.getDuration=function(){return this.state.activePlay&&this.state.activePlay.sound?this.state.activePlay.sound.duration():0},c.prototype.maybeCanSkip=function(){return this.session.maybeCanSkip()};var d="muted";c.prototype.isMuted=function(){return a()&&d in localStorage?"true"===localStorage[d]:!1},c.prototype.setMuted=function(b){b?(this.speaker.setVolume(0),a()&&(localStorage[d]=!0),this.trigger("muted")):(this.speaker.setVolume(100),a()&&(localStorage[d]=!1),this.trigger("unmuted"))},window.Feed=window.Feed||{},window.Feed.Player=c}(),function(){function a(a){var b=Math.floor(a/1e3),c=b%60,d=Math.floor(b/60);return 10>c&&(c="0"+c),d+":"+c}var b=Feed.log,c=function(a,c){var d=this;this.id=a,this.alertId=null,this.durationId=null,this.startedPlayback=!1,this.$el=$("#"+a),this.player=c,this.player.on("placement",this._onPlacement,this),this.player.on("play-started",this._onPlayStarted,this),this.player.on("play-paused",this._onPlayPaused,this),this.player.on("play-resumed",this._onPlayResumed,this),this.player.on("play-completed",this._onPlayCompleted,this),this.player.on("plays-exhausted",this._onPlaysExhausted,this),this.player.on("skip-denied",this._onSkipDenied,this),this.player.on("muted",_.bind(this.renderMute,this,!0)),this.player.on("unmuted",_.bind(this.renderMute,this,!1)),this.player.on("all",function(){b("seeing",arguments)}),this._enableButtonsBasedOnState(),this.displayText=this.originalDisplayText=this.$(".status").html(),this.renderStatus(),this.player.getStationInformation(function(a){d.originalDisplayText=d.formatStation(a),d.renderStatus(d.originalDisplayText)}),this.renderMute(this.player.isMuted()),this.$(".play-button").on("click",_.bind(this._onPlayButtonClick,this)),this.$(".pause-button").on("click",_.bind(this._onPauseButtonClick,this)),this.$(".skip-button").on("click",_.bind(this._onSkipButtonClick,this)),this.$(".mute-button").on("click",_.bind(this._onMuteButtonClick,this)),this.$(".un-mute-button").on("click",_.bind(this._onUnMuteButtonClick,this))};c.prototype._onMuteButtonClick=function(){this.player.setMuted(!0)},c.prototype._onUnMuteButtonClick=function(){this.player.setMuted(!1)},c.prototype.renderMute=function(a){a?(this.$(".mute-button").removeClass("button-enabled").addClass("button-disabled"),this.$(".un-mute-button").removeClass("button-disabled").addClass("button-enabled")):(this.$(".mute-button").removeClass("button-disabled").addClass("button-enabled"),this.$(".un-mute-button").removeClass("button-enabled").addClass("button-disabled"))},c.prototype._onPlayButtonClick=function(){this.player.play()},c.prototype._onPauseButtonClick=function(){this.player.pause()},c.prototype._onSkipButtonClick=function(){this.player.skip()},c.prototype.$=function(a){return this.$el.find(a)},c.prototype._onPlacement=function(a){this._originalDisplayText||(this.originalDisplayText=this.formatPlacement(a),this.renderStatus(this.originalDisplayText))},c.prototype.formatPlacement=function(a){return"Tune in to <em class='placement'>"+a.name+"</em>"},c.prototype._onPlayStarted=function(a){this.startedPlayback=!0,this.renderStatus(this.formatPlay(a)),this._enableButtonsBasedOnState(),this._enablePositionTracker()},c.prototype._enablePositionTracker=function(){var a=this;this.durationId||(this.durationId=window.setInterval(function(){a.renderPosition(a.player.getPosition(),a.player.getDuration())},500))},c.prototype._disablePositionTracker=function(){this.durationId&&(window.clearInterval(this.durationId),this.durationId=null)},c.prototype._onPlayResumed=function(){this._enablePositionTracker(),this._enableButtonsBasedOnState()},c.prototype._onPlayPaused=function(){this._disablePositionTracker(),this._enableButtonsBasedOnState()},c.prototype._onPlayCompleted=function(){this.renderStatus(this.originalDisplayText),this.renderPosition(0,0),this._enableButtonsBasedOnState()},c.prototype._onPlaysExhausted=function(){this.renderAlert("There is no more music to play in this station!"),this._enableButtonsBasedOnState()},c.prototype._onSkipDenied=function(){this.renderAlert("Sorry you've temporarily run out of skips!")},c.prototype.formatPlay=function(a){return"<span class='track'>"+a.audio_file.track.title+"</span> by <span class='artist'>"+a.audio_file.artist.name+"</span> on <span class='release'>"+a.audio_file.release.title+"</span>"},c.prototype.renderStatus=function(a){void 0!==a&&(this.displayText=a),this.alertId||this.$(".status").html(this.displayText).removeClass("alert")},c.prototype.renderPosition=function(b,c){if(this.$(".elapsed").html(a(b)),this.$(".duration").html(a(c)),0===c)this.$(".progress").css("width","0");else{var d=Math.round(100*((b+1e3)/c));d=d>100?100:d,this.$(".progress").css("width",d+"%")}},c.prototype.renderAlert=function(a){this.alertId&&window.clearTimeout(this.alertId),this.$(".status").html(a).addClass("alert");var b=this;this.alertId=window.setTimeout(function(){b.alertId=null,b.renderStatus()},3e3)},c.prototype._enableButtonsBasedOnState=function(){var a=this.player.getCurrentState();switch(a){case"playing":this.$(".play-button").removeClass("button-enabled").addClass("button-disabled").attr("disabled","true"),this.$(".pause-button").removeClass("button-disabled").addClass("button-enabled").removeAttr("disabled"),this.player.maybeCanSkip()?this.$(".skip-button").removeClass("button-disabled").addClass("button-enabled").removeAttr("disabled"):this.$(".skip-button").removeClass("button-enabled").addClass("button-disabled").attr("disabled","true");break;case"paused":this.$(".play-button").removeClass("button-disabled").addClass("button-enabled").removeAttr("disabled"),this.$(".pause-button").removeClass("button-enabled").addClass("button-disabled").attr("disabled","true"),this.player.maybeCanSkip()?this.$(".skip-button").removeClass("button-disabled").addClass("button-enabled").removeAttr("disabled"):this.$(".skip-button").removeClass("button-enabled").addClass("button-disabled").attr("disabled","true");break;default:this.$(".play-button").removeClass("button-disabled").addClass("button-enabled").removeAttr("disabled"),this.$(".pause-button").removeClass("button-enabled").addClass("button-disabled").attr("disabled","true"),this.$(".skip-button").removeClass("button-enabled").addClass("button-disabled").attr("disabled","true")}},window.Feed=window.Feed||{},window.Feed.PlayerView=c}();